<div class="bg-white rounded-xl shadow-sm ring-1 ring-gray-100 p-6 space-y-6">
  <!-- Loading Overlay -->
  <div *ngIf="isLoadingEvent" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-8 flex flex-col items-center gap-4">
      <div class="animate-spin text-indigo-600">
        <svg width="48" height="48" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <style>.spinner_ajPY{transform-origin:center;animation:spinner_AtaB .75s infinite linear}@keyframes spinner_AtaB{100%{transform:rotate(360deg)}}</style>
          <path fill="currentColor" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/>
          <path fill="currentColor" d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"/>
        </svg>
      </div>
      <p class="text-lg font-medium text-gray-900">Loading Event...</p>
      <p class="text-sm text-gray-500">Please wait while we fetch the event details</p>
    </div>
  </div>

  <div class="flex items-center justify-between">
    <div class="flex items-center gap-3">
      <span class="inline-flex h-10 w-10 items-center justify-center rounded-lg bg-indigo-50 text-indigo-600">
        <i class="fa-regular fa-calendar-plus"></i>
      </span>
      <div>
        <h2 class="text-lg font-semibold text-gray-900">{{ isEditMode ? 'Edit Event' : 'Create Event' }}</h2>
        <p class="text-sm text-gray-500">{{ isEditMode ? 'Update event details across the steps' : 'Add a new event using the guided steps' }}</p>
      </div>
    </div>
    <div class="flex items-center gap-2">
      <button *ngIf="isEditMode" (click)="deleteEvent()" [disabled]="isDeleting" class="inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed">
        <i class="fa-solid fa-trash"></i>
        {{ isDeleting ? 'Deleting...' : 'Delete Event' }}
      </button>
      <a routerLink="/hosts/console/events" class="inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50">
        <i class="fa-solid fa-arrow-left"></i>
        Back to Events
      </a>
    </div>
  </div>

  <div class="grid grid-cols-5 w-full bg-gray-100 rounded-md p-1 select-none">
    <button disabled class="px-4 py-2 rounded text-sm font-medium transition" [ngClass]="{ 'bg-white text-gray-900 shadow': step===1, 'text-gray-600': step!==1 }">Detail</button>
    <button disabled class="px-4 py-2 rounded text-sm font-medium transition" [ngClass]="{ 'bg-white text-gray-900 shadow': step===2, 'text-gray-600': step!==2 }">Dates</button>
    <button disabled class="px-4 py-2 rounded text-sm font-medium transition" [ngClass]="{ 'bg-white text-gray-900 shadow': step===4, 'text-gray-600': step!==4 }">Image</button>
    <button disabled class="px-4 py-2 rounded text-sm font-medium transition" [ngClass]="{ 'bg-white text-gray-900 shadow': step===5, 'text-gray-600': step!==5 }">Media</button>
    <button disabled class="px-4 py-2 rounded text-sm font-medium transition" [ngClass]="{ 'bg-white text-gray-900 shadow': step===6, 'text-gray-600': step!==6 }">Artists</button>
  </div>

  <div [ngSwitch]="step">
    <!-- Step 1: Detail -->
    <form *ngSwitchCase="1" [formGroup]="detailsForm" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Event Domain (Optional)</label>
          <select class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="id_event_domain" (change)="onEventDomainChange()">
            <option [ngValue]="null">Select event domain</option>
            <option *ngFor="let e of eventDomains" [ngValue]="e.id">{{ e.name | titlecase }}</option>
          </select>
        </div>
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Edition Type (Optional)</label>
          <select class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="id_edition_type" (change)="onEditionTypeChange()">
            <option [ngValue]="null">Select edition type</option>
            <option *ngFor="let p of editionTypes" [ngValue]="p.id">{{ p.name | titlecase }}</option>
          </select>
        </div>
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Edition *</label>
          <select class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="id_edition">
            <option [ngValue]="null">Select edition</option>
            <option *ngFor="let ed of editions" [ngValue]="ed.id">{{ ed.name }} {{ ed.year }}</option>
          </select>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Event Type *</label>
          <select class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="id_event_type">
            <option [ngValue]="null">Select type</option>
            <option *ngFor="let t of eventTypes" [ngValue]="t.id">{{ t.name | titlecase }}</option>
          </select>
        </div>
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Status *</label>
          <select class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="status">
            <option [ngValue]="1">Draft</option>
            <option [ngValue]="2">Published</option>
            <option [ngValue]="3">Archived</option>
          </select>
        </div>
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide flex items-center gap-2">
            <input type="checkbox" formControlName="is_active" class="rounded border-gray-300">
            Active
          </label>
          <p class="text-xs text-gray-500 mt-1">Check to make event visible to public</p>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Title</label>
          <input type="text" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="title" />
        </div>
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Booking URL</label>
          <input type="text" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="booking_url" />
        </div>
      </div>

      <div class="flex flex-col">
        <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Teaser (Short)</label>
        <textarea rows="2" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="teaser" maxlength="200"></textarea>
        <div class="text-xs text-gray-500 mt-1">{{ teaserLength }}/200</div>
      </div>

      <div class="flex flex-col">
        <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Long Teaser (Optional)</label>
        <textarea rows="3" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="long_teaser"></textarea>
        <div class="text-xs text-gray-500 mt-1">Extended preview text for event listing</div>
      </div>

      <div class="flex flex-col">
        <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Description *</label>
        <textarea rows="6" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="description" ></textarea>
        
      </div>

      <div class="flex flex-col">
        <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Photo Credit (Optional)</label>
        <input type="text" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="credit_photo" placeholder="Photographer name or source" />
      </div>
      <div class="flex justify-end">
        <button type="button" (click)="next()" class="px-4 py-2 rounded bg-black text-white">

           <span  *ngIf="!showAnILoader"  >Submit</span>
        <span *ngIf="showAnILoader" class="animate-spin text-white">
                    <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY{transform-origin:center;animation:spinner_AtaB .75s infinite linear}@keyframes spinner_AtaB{100%{transform:rotate(360deg)}}</style><path fill="currentColor" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/><path fill="currentColor" d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"/></svg>
                </span>

        </button>
      </div>
    </form>

    <!-- Step 2: Dates -->
    <form *ngSwitchCase="2" [formGroup]="detailsForm" class="space-y-6">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Editor -->
        <div class="lg:col-span-2 border rounded-lg p-4 space-y-4">
          <div class="flex items-center justify-between">
            <div class="font-semibold flex items-center gap-2">
              <i class="fa-regular fa-calendar-days text-pont-green"></i>
              Manage Event Dates
            </div>
            <button type="button" (click)="addDate()" class="px-3 py-1.5 rounded bg-gray-900 text-white">Add Date</button>
          </div>
          <p class="text-xs text-gray-500">Add one or more date/time slots for your event. Use 24h time format.</p>
          <div class="space-y-4" formArrayName="dates">
            <div *ngFor="let d of eventDates.controls; let i = index" [formGroupName]="i" class="border rounded-lg p-4 space-y-4">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <label class="text-xs text-gray-600">Date Type *
                  <select class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="flag" (change)="onDateTypeChange(i)">
                    <option value="">Select date type</option>
                    <option value="p">Period (multi-day)</option>
                    <option value="d">Date (single day)</option>
                  </select>
                  <span class="text-xs text-gray-500">Choose how this event slot should be scheduled</span>
                </label>
                <label class="text-xs text-gray-600">Location (Optional)
                  <select class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="id_location">
                    <option [ngValue]="null">Use event default location</option>
                    <option *ngFor="let l of locations" [ngValue]="l.id">{{ l.name | titlecase }}</option>
                  </select>
                  <span class="text-xs text-gray-500">Leave empty to fallback to the default event venue</span>
                </label>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                <label class="text-xs text-gray-600">Start Date *
                  <input type="date" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="start_date" />
                </label>
                <label class="text-xs text-gray-600" *ngIf="isPeriod(i)">End Date *
                  <input type="date" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="end_date" />
                  <span class="text-xs text-gray-500">Required for date ranges</span>
                </label>
                <label class="text-xs text-gray-600" *ngIf="isSingleDate(i)">Time *
                  <input type="time" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="time" />
                  <span class="text-xs text-gray-500">24h time (e.g. 18:30)</span>
                </label>
              </div>
              <div class="flex justify-end">
                <button type="button" (click)="removeDate(i)" class="px-3 py-2 rounded border border-red-300 text-red-600 hover:bg-red-50">Remove Date</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Preview -->
        <div class="border rounded-lg p-4 space-y-3">
          <div class="font-semibold flex items-center gap-2">
            <i class="fa-regular fa-eye text-pont-green"></i>
            Preview
          </div>
          <div class="space-y-2" *ngIf="eventDates.controls.length; else noDates">
            <div *ngFor="let d of eventDates.controls" class="p-3 rounded bg-gray-50 space-y-1">
              <div class="text-sm text-gray-900 font-medium">
                <i class="fa-regular fa-calendar text-pont-green mr-2"></i>
                <span>{{ d.value.start_date }}</span>
                <span *ngIf="d.value.end_date"> - {{ d.value.end_date }}</span>
              </div>
              <div class="text-sm text-gray-600 ml-6" *ngIf="d.value.flag === 'd' && d.value.time">
                <i class="fa-regular fa-clock mr-2"></i>
                <span>{{ d.value.time }}</span>
              </div>
              <div *ngIf="d.value.flag" class="text-xs text-gray-500 ml-6">
                <i class="fa-solid fa-flag mr-2"></i>
                <span>{{ d.value.flag === 'p' ? 'Period' : 'Date' }}</span>
              </div>
            </div>
          </div>
          <ng-template #noDates>
            <p class="text-sm text-gray-500">No dates added yet.</p>
          </ng-template>
        </div>
      </div>

      <div class="flex justify-between">
        <button type="button" (click)="back()" class="px-4 py-2 rounded border">Back</button>
        <button type="button" (click)="next()" class="px-4 py-2 rounded bg-black text-white">
          
           <span  *ngIf="!showAnILoader"  >Save & Next</span>
        <span *ngIf="showAnILoader" class="animate-spin text-white">
                    <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY{transform-origin:center;animation:spinner_AtaB .75s infinite linear}@keyframes spinner_AtaB{100%{transform:rotate(360deg)}}</style><path fill="currentColor" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/><path fill="currentColor" d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"/></svg>
                </span>
        </button>
      </div>
    </form>

    <!-- Step 3: Shows - REMOVED (no event_shows table in schema) -->

    <!-- Step 4: Image -->
    <div *ngSwitchCase="4" class="space-y-6">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Main Image -->
        <div class="border rounded-lg p-4 space-y-3 lg:col-span-2">
          <div class="font-semibold flex items-center gap-2">
            <i class="fa-regular fa-image text-pont-green"></i>
            Main Image
          </div>
          <p class="text-xs text-gray-500">This image will represent the event. PNG/JPG up to ~5MB.</p>
          <input type="file" (change)="onMainImageSelected($event)" accept="image/*" />
          <div *ngIf="uploadPreviewUrl" class="mt-2">
            <img [src]="uploadPreviewUrl" class="w-full h-56 object-cover rounded" />
          </div>
        </div>

        <!-- Tips -->
        <div class="border rounded-lg p-4 space-y-2 lg:col-span-1 bg-gray-50">
          <div class="font-semibold">Tips</div>
          <ul class="text-sm text-gray-600 list-disc ml-5 space-y-1">
            <li>Use a high-resolution, well-cropped image.</li>
            <li>Avoid text on the image for better readability.</li>
            <li>Square or 16:9 images work best.</li>
          </ul>
        </div>
      </div>

      <div class="flex justify-between">
        <button (click)="back()" class="px-4 py-2 rounded border">Back</button>
        <button (click)="next()" class="px-4 py-2 rounded bg-black text-white">
          <span  *ngIf="!showAnILoader"  >Save & Next</span>
        <span *ngIf="showAnILoader" class="animate-spin text-white">
                    <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY{transform-origin:center;animation:spinner_AtaB .75s infinite linear}@keyframes spinner_AtaB{100%{transform:rotate(360deg)}}</style><path fill="currentColor" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/><path fill="currentColor" d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"/></svg>
                </span>
        </button>
      </div>
    </div>

    <!-- Step 5: Media -->
    <div *ngSwitchCase="5" class="space-y-6">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Media Editor -->
        <form [formGroup]="mediaForm" class="border rounded-lg p-4 space-y-4 lg:col-span-2">
          <div class="flex items-center justify-between">
            <div class="font-semibold flex items-center gap-2">
              <i class="fa-solid fa-record-vinyl text-pont-green"></i>
              Media (Videos / CDs)
            </div>
            <button type="button" (click)="addMediaItem()" class="px-3 py-1.5 rounded border">Add Media</button>
          </div>
          <p class="text-xs text-gray-500">Add media with title, optional description, URL and a cover image. Images are stored in the events bucket.</p>
          <div class="space-y-3" formArrayName="media">
            <div *ngFor="let m of mediaItems.controls; let i = index" [formGroupName]="i" class="grid grid-cols-1 md:grid-cols-12 gap-3 items-start">
              <div class="md:col-span-2">
                <div class="text-xs text-gray-600 mb-1">Type</div>
                <div class="inline-flex rounded-md border overflow-hidden">
                  <button type="button" (click)="setMediaType(i, 1)" [ngClass]="(m.value.id_media===1)?'bg-gray-900 text-white':'bg-white text-gray-700'" class="px-3 py-1 text-xs">Video</button>
                  <button type="button" (click)="setMediaType(i, 2)" [ngClass]="(m.value.id_media===2)?'bg-gray-900 text-white':'bg-white text-gray-700'" class="px-3 py-1 text-xs">CD</button>
                </div>
              </div>
              <label class="md:col-span-3 text-xs text-gray-600">Title
                <input type="text" placeholder="Title" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="title" />
              </label>
              <label class="md:col-span-4 text-xs text-gray-600">Description
                <input type="text" placeholder="Short description (optional)" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="description" />
              </label>
              <label class="md:col-span-3 text-xs text-gray-600">URL
                <input type="text" placeholder="https://... (optional)" class="w-full px-3 py-2 rounded-lg border border-gray-200" formControlName="url" />
              </label>
              <div class="md:col-span-6">
                <label class="text-xs text-gray-600">Cover Image</label>
                <input type="file" accept="image/*" (change)="onMediaImageSelected($event, i)" />
              </div>
              <div class="md:col-span-6 flex justify-end">
                <button type="button" (click)="removeMediaItem(i)" class="px-3 py-2 rounded border">Remove</button>
              </div>
            </div>
          </div>
        </form>

        <!-- Preview -->
        <div class="border rounded-lg p-4 space-y-3">
          <div class="font-semibold flex items-center gap-2">
            <i class="fa-regular fa-eye text-pont-green"></i>
            Preview
          </div>
          <div class="space-y-3" *ngIf="mediaItems.controls.length; else noMedia">
            <div *ngFor="let m of mediaItems.controls" class="p-2 rounded bg-gray-50">
              <div class="text-xs text-gray-500">{{ m.value.id_media===1 ? 'Video' : 'CD' }}</div>
              <div class="font-semibold text-gray-900">{{ m.value.title }}</div>
              <div class="text-gray-700 text-sm" *ngIf="m.value.description">{{ m.value.description }}</div>
              <a *ngIf="m.value.url" [href]="m.value.url" target="_blank" rel="noopener" class="text-pont-green text-sm underline">Open Link</a>
            </div>
          </div>
          <ng-template #noMedia>
            <p class="text-sm text-gray-500">No media added yet.</p>
          </ng-template>
        </div>
      </div>

      <div class="flex justify-between">
        <button (click)="back()" class="px-4 py-2 rounded border">Back</button>
        <button (click)="next()" class="px-4 py-2 rounded bg-black text-white">
           <span  *ngIf="!showAnILoader"  >Save & Next</span>
        <span *ngIf="showAnILoader" class="animate-spin text-white">
                    <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY{transform-origin:center;animation:spinner_AtaB .75s infinite linear}@keyframes spinner_AtaB{100%{transform:rotate(360deg)}}</style><path fill="currentColor" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/><path fill="currentColor" d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"/></svg>
                </span>
        </button>
      </div>
    </div>

    <!-- Step 6: Artists -->
    <div *ngSwitchCase="6" class="space-y-6 relative">
      <div class="border rounded-lg p-4 ">
        <div class="flex items-center justify-between mb-3">
          <div class="font-semibold">Artists </div>
          <button type="button" (click)="showAnImodal = true" class="px-3 py-1.5 rounded bg-gray-900 text-white">Add Artist</button>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200" *ngIf="tableAnIARow && tableAnIARow.length > 0; else noArtists">
            <thead class="bg-gray-50 text-left">
              <tr>
                <th class="px-4 py-2 text-xs font-semibold text-gray-600 uppercase">Photo</th>
                <th class="px-4 py-2 text-xs font-semibold text-gray-600 uppercase">Artist Name</th>
                <th class="px-4 py-2 text-xs font-semibold text-gray-600 uppercase">Instrument</th>
                <th class="px-4 py-2"></th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
              <tr *ngFor="let r of tableAnIARow; let i = index">
                <td class="px-4 py-2">
                  <div class="flex items-center gap-3">
                    <img [src]="r.photo || '/assets/images/profile/user-b.png'" class="w-10 h-10 rounded-full object-cover" alt="{{ r.name }}" />
                  </div>
                </td>
                <td class="px-4 py-2">
                     <div class="text-sm font-medium text-gray-900">{{ r.name || 'Unknown Artist' }}</div>
                     <div class="text-xs text-gray-500">ID: {{ r.id_artist }}</div>
                </td>
                <td class="px-4 py-2">
                  <div class="inline-flex items-center px-2 py-1 rounded-full bg-indigo-50 text-indigo-700 text-sm">
                    <i class="fa-solid fa-music mr-2"></i>
                    {{ (r.instrument | titlecase) || 'Unknown Instrument' }}
                  </div>
                </td>
                <td class="px-4 py-2 text-right">
                  <button type="button" class="px-3 py-1.5 rounded border border-red-300 text-red-600 hover:bg-red-50" (click)="removeArtistRow(i)">
                    <i class="fa-solid fa-trash mr-1"></i>
                    Remove
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
          
          <ng-template #noArtists>
            <div class="text-center py-12 border-2 border-dashed border-gray-300 rounded-lg">
              <i class="fa-solid fa-users text-4xl text-gray-400 mb-3"></i>
              <p class="text-gray-600 font-medium mb-1">No Artists Added Yet</p>
              <p class="text-sm text-gray-500">Click "Add Artist" button above to add artists to this event</p>
            </div>
          </ng-template>
        </div>


   <div *ngIf="showAnImodal" class="w-2/4 rounded-lg absolute top-0 left-60 p-4 border bg-white border-gray-700 shadow-lg">
    <div class="flex justify-between">
      <p class="font-medium text-xl">Add Artist & Instruments</p>
      <i class="fa-solid fa-xmark hover:text-red-700 cursor-pointer"  (click)="showAnImodal = false"></i>
    </div>
      <div class="mt-4">
        <p class="text-xs font-medium mb-1"> Artist</p>
        <select class="border border-gray-300 p-2 w-full rounded-lg" (change)="selectArtist6($event)">
          <option value="0">Select Artist </option>
          @for(x of availableArtists; track x){
            <option [value]="x.id">{{x.name | titlecase}} </option>
          }
          
        </select>
      </div>

      <div class="mt-4">
        <p class="text-xs font-medium mb-1"> Instrument</p>
        <select class="border border-gray-300 p-2 w-full rounded-lg" (change)="selectInst6($event)" [disabled]="!availInstList">
          <option value="0">Select Instrument </option>
            @for(x of availInstList; track x){
            <option [value]="x.id_inst">{{x.instrument | titlecase}} </option>
          }
          
        </select>
      </div>

      <button class="flex justify-center w-full bg-pont-green text-white rounded-lg p-2 mt-2" (click)="submitAnI()">
      
      <span  *ngIf="!showAnILoader"  >Submit</span>
        <span *ngIf="showAnILoader" class="animate-spin text-white">
                    <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY{transform-origin:center;animation:spinner_AtaB .75s infinite linear}@keyframes spinner_AtaB{100%{transform:rotate(360deg)}}</style><path fill="currentColor" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/><path fill="currentColor" d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"/></svg>
                </span>
      </button>
    </div>


   </div>
    

      <div class="flex justify-between">
        <button type="button" (click)="back()" class="px-4 py-2 rounded border">Back</button>
        <button type="button" [disabled]="isSaving" (click)="submit()" class="px-4 py-2 rounded bg-black text-white">{{ isSaving ? 'Saving...' : (isEditMode ? 'Update Event' : 'Create Event') }}</button>
      </div>
 
    </div>
    
  </div>


</div>
    
  
  
   

